2021-02-25 09:03:25.085 +08:00 [DBG] Hosting starting
2021-02-25 09:03:25.334 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 09:03:25.344 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 09:03:25.416 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 09:03:25.428 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 09:03:25.438 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 09:03:25.448 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 09:03:25.459 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:03:25.462 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 09:03:25.465 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:03:25.470 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 09:03:25.474 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 09:03:25.479 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 09:03:25.482 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 09:03:25.724 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 09:03:25.725 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 09:03:25.727 +08:00 [INF] Hosting environment: Development
2021-02-25 09:03:25.728 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 09:03:25.730 +08:00 [DBG] Hosting started
2021-02-25 09:03:25.765 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 09:03:25.768 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 09:03:25.844 +08:00 [DBG] Connection ID "18230571323271152632" disconnecting.
2021-02-25 09:03:25.845 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:03:25.850 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 88.9417ms
2021-02-25 09:03:25.945 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 100.2646ms
2021-02-25 09:03:25.953 +08:00 [DBG] Connection ID "17365880173341180960" disconnecting.
2021-02-25 09:03:25.987 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/swagger-ui.css - -
2021-02-25 09:03:25.999 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/swagger-ui-standalone-preset.js - -
2021-02-25 09:03:25.999 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/swagger-ui-bundle.js - -
2021-02-25 09:03:26.052 +08:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-02-25 09:03:26.057 +08:00 [DBG] Connection ID "17870283344491577485" disconnecting.
2021-02-25 09:03:26.058 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/swagger-ui.css - - - 200 142933 text/css 70.3070ms
2021-02-25 09:03:26.071 +08:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-02-25 09:03:26.081 +08:00 [DBG] Connection ID "18374686498462106703" disconnecting.
2021-02-25 09:03:26.082 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 83.4572ms
2021-02-25 09:03:26.089 +08:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-02-25 09:03:26.109 +08:00 [DBG] Connection ID "17798225728978813308" disconnecting.
2021-02-25 09:03:26.111 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 111.0382ms
2021-02-25 09:03:26.150 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - -
2021-02-25 09:03:26.154 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-02-25 09:03:26.156 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - - - 200 628 image/png 6.1099ms
2021-02-25 09:03:26.156 +08:00 [DBG] Connection ID "17870283344491577487" disconnecting.
2021-02-25 09:03:29.929 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Roles?name=11&pageIndex=1&pageSize=100 - -
2021-02-25 09:03:29.931 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:03:29.970 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Roles'
2021-02-25 09:03:29.975 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles' is valid for the request path '/api/Roles'
2021-02-25 09:03:29.979 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:03:30.132 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:03:30.139 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:03:30.148 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 09:03:30.173 +08:00 [INF] Route matched with {action = "Query", controller = "Roles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:03:30.176 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:03:30.178 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:03:30.180 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:03:30.181 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:03:30.183 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:03:30.187 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:03:30.336 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 09:03:30.364 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:03:30.372 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2021-02-25 09:03:30.376 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2021-02-25 09:03:30.379 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:03:30.381 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:03:30.383 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2021-02-25 09:03:30.389 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2021-02-25 09:03:30.392 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:03:30.394 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 09:03:30.396 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:03:30.398 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:03:30.400 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:03:30.402 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:03:30.404 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:03:30.406 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 09:03:30.408 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:03:30.409 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:03:30.411 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:03:30.413 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:03:30.469 +08:00 [INF] Executing action method UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 09:03:35.219 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:03:35.221 +08:00 [DBG] The property 'RoleDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:03:35.222 +08:00 [DBG] The property 'UserDTOId.RoleDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:03:35.349 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:03:35.472 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Count()'
2021-02-25 09:03:35.610 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Role AS s), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 09:03:35.662 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:03:35.706 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (41ms).
2021-02-25 09:03:35.714 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:36.098 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:36.113 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
2021-02-25 09:03:36.162 +08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
2021-02-25 09:03:36.183 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:03:36.189 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:36.196 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:39.834 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 09:03:39.880 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoleDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoleDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoleDTO.Name (string), 1], [Property: RoleDTO.No (int) Required, 2], [Property: RoleDTO.UserDTOId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT s.Id, s.Name, s.No, s.UserDTOId
        FROM S_Role AS s
        ORDER BY s.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoleDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:03:39.892 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:03:39.894 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 09:03:39.901 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:39.904 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:39.910 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No], [s].[UserDTOId]
FROM [S_Role] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 09:03:39.958 +08:00 [ERR] Failed executing DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No], [s].[UserDTOId]
FROM [S_Role] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 09:03:39.961 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:39.964 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:03:40.024 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'UserDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3f9f21aa-198c-46a7-bb95-c9095fe81527
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'UserDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3f9f21aa-198c-46a7-bb95-c9095fe81527
Error Number:207,State:1,Class:16
2021-02-25 09:05:43.418 +08:00 [DBG] Hosting starting
2021-02-25 09:05:43.512 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 09:05:43.519 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 09:05:43.543 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 09:05:43.555 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 09:05:43.582 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 09:05:43.595 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 09:05:43.605 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:05:43.611 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 09:05:43.618 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:05:43.623 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 09:05:43.628 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 09:05:43.632 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 09:05:43.634 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 09:05:43.866 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 09:05:43.867 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 09:05:43.869 +08:00 [INF] Hosting environment: Development
2021-02-25 09:05:43.870 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 09:05:43.871 +08:00 [DBG] Hosting started
2021-02-25 09:05:43.903 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 09:05:43.907 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 09:05:44.004 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:05:44.030 +08:00 [DBG] Connection ID "17798225728978813310" disconnecting.
2021-02-25 09:05:44.035 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 135.0794ms
2021-02-25 09:05:44.113 +08:00 [DBG] Connection ID "17870283323016741714" disconnecting.
2021-02-25 09:05:44.114 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 109.8946ms
2021-02-25 09:05:44.774 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Roles?name=11&pageIndex=1&pageSize=100 - -
2021-02-25 09:05:44.779 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:05:44.813 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Roles'
2021-02-25 09:05:44.818 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles' is valid for the request path '/api/Roles'
2021-02-25 09:05:44.821 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:05:44.882 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:05:44.889 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:05:44.898 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 09:05:44.926 +08:00 [INF] Route matched with {action = "Query", controller = "Roles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:05:44.929 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:05:44.931 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:05:44.933 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:05:44.935 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:05:44.937 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:05:44.939 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:05:45.038 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 09:05:45.065 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:05:45.071 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2021-02-25 09:05:45.077 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2021-02-25 09:05:45.080 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:05:45.082 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:05:45.083 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2021-02-25 09:05:45.087 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2021-02-25 09:05:45.090 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:05:45.092 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 09:05:45.096 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:05:45.098 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:05:45.099 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:05:45.101 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:05:45.103 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:05:45.104 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 09:05:45.106 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:05:45.109 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:05:45.111 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:05:45.113 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:05:45.171 +08:00 [INF] Executing action method UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 09:05:50.419 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:05:50.421 +08:00 [DBG] The property 'RoleDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:05:50.423 +08:00 [DBG] The property 'UserDTOId.RoleDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:05:50.563 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:05:50.647 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True & Invoke(w => w.Name.Contains(__name_0), w)
    )
    .Count()'
2021-02-25 09:05:50.812 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Role AS s
            WHERE CAST(1 AS bit) & ((@__name_0 LIKE N'') || (CHARINDEX(@__name_0, s.Name) > 0))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 09:05:50.864 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:05:50.901 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (32ms).
2021-02-25 09:05:50.919 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:05:51.302 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:05:51.318 +08:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
2021-02-25 09:05:51.377 +08:00 [INF] Executed DbCommand (66ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
2021-02-25 09:05:51.400 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:05:51.406 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:05:51.412 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:05:56.391 +08:00 [DBG] DetectChanges starting for 'PermissionQueriesContext'.
2021-02-25 09:05:56.395 +08:00 [DBG] DetectChanges completed for 'PermissionQueriesContext'.
2021-02-25 09:06:00.790 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True & Invoke(w => w.Name.Contains(__name_0), w)
    )
    .OrderBy(o => o.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2021-02-25 09:06:00.820 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoleDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoleDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoleDTO.Name (string), 1], [Property: RoleDTO.No (int) Required, 2], [Property: RoleDTO.UserDTOId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT s.Id, s.Name, s.No, s.UserDTOId
        FROM S_Role AS s
        WHERE CAST(1 AS bit) & ((@__name_0 LIKE N'') || (CHARINDEX(@__name_0, s.Name) > 0))
        ORDER BY s.Id ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoleDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:06:00.830 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:06:00.832 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 09:06:00.834 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:06:00.836 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:06:00.838 +08:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No], [s].[UserDTOId]
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
ORDER BY [s].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2021-02-25 09:06:00.868 +08:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@__name_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No], [s].[UserDTOId]
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
ORDER BY [s].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2021-02-25 09:06:00.871 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:06:00.873 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:06:00.912 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'UserDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7f24b957-a249-405a-83f9-3a09cdd9d003
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'UserDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7f24b957-a249-405a-83f9-3a09cdd9d003
Error Number:207,State:1,Class:16
2021-02-25 09:06:25.421 +08:00 [INF] Executed action UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API) in 40478.2434ms
2021-02-25 09:06:25.424 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:29:47.288 +08:00 [DBG] Hosting starting
2021-02-25 09:29:47.352 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 09:29:47.357 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 09:29:47.364 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 09:29:47.369 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 09:29:47.376 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 09:29:47.385 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 09:29:47.394 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:29:47.396 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 09:29:47.398 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:29:47.400 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 09:29:47.404 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 09:29:47.407 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 09:29:47.408 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 09:29:47.539 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 09:29:47.540 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 09:29:47.540 +08:00 [INF] Hosting environment: Development
2021-02-25 09:29:47.540 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 09:29:47.540 +08:00 [DBG] Hosting started
2021-02-25 09:29:47.553 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 09:29:47.554 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 09:29:47.590 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:29:47.591 +08:00 [DBG] Connection ID "17870283344491577495" disconnecting.
2021-02-25 09:29:47.594 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 44.2805ms
2021-02-25 09:29:47.649 +08:00 [DBG] Connection ID "18374686507052041577" disconnecting.
2021-02-25 09:29:47.649 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 58.9841ms
2021-02-25 09:29:53.550 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:29:53.552 +08:00 [DBG] Connection ID "17726168134940885025" disconnecting.
2021-02-25 09:29:53.552 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 1.2822ms
2021-02-25 09:29:53.839 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - -
2021-02-25 09:29:53.847 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - -
2021-02-25 09:29:53.854 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-02-25 09:29:53.855 +08:00 [DBG] Connection ID "17365880173341180998" disconnecting.
2021-02-25 09:29:53.854 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - - - 200 628 image/png 7.5722ms
2021-02-25 09:29:54.024 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.4600ms
2021-02-25 09:29:54.024 +08:00 [DBG] Connection ID "18086456122310394909" disconnecting.
2021-02-25 09:30:00.198 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Roles/all - -
2021-02-25 09:30:00.198 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:30:00.228 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Roles/all'
2021-02-25 09:30:00.231 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.QueryAll (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles/all' is valid for the request path '/api/Roles/all'
2021-02-25 09:30:00.231 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles/{id}' is valid for the request path '/api/Roles/all'
2021-02-25 09:30:00.232 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:00.422 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:30:00.425 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:00.431 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 09:30:00.441 +08:00 [INF] Route matched with {action = "QueryAll", controller = "Roles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO]] QueryAll() on controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:30:00.442 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:30:00.442 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:30:00.442 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:30:00.443 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:30:00.443 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:30:00.444 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:00.563 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 09:30:00.583 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:00.902 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 09:30:00.903 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 09:30:00.972 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:30:00.972 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:30:00.972 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:30:00.972 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:30:00.972 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:30:01.078 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:30:01.180 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .OrderBy(o => o.No)'
2021-02-25 09:30:01.327 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoleDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoleDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoleDTO.Name (string), 1], [Property: RoleDTO.No (int) Required, 2], }
        SELECT s.Id, s.Name, s.No
        FROM S_Role AS s
        ORDER BY s.No ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoleDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:30:01.356 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:30:01.380 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2021-02-25 09:30:01.385 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:01.734 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:01.743 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
ORDER BY [s].[No]
2021-02-25 09:30:01.800 +08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
ORDER BY [s].[No]
2021-02-25 09:30:01.819 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:30:01.821 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:01.825 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:01.827 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 09:30:01.830 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 09:30:01.830 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 09:30:01.830 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 09:30:01.830 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 09:30:01.831 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 09:30:01.831 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 09:30:01.873 +08:00 [INF] Executed action UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.QueryAll (UltraNuke.Barasingha.Permission.API) in 1426.4705ms
2021-02-25 09:30:01.873 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:01.880 +08:00 [INF]  "2021-02-25T09:30:01.8740020+08:00"GEThttpslocalhost:44303/api/Roles/all[{"Id":"2d197e9c-da20-44fa-890e-ac7700a18e6c","No":1,"Name":"管理员","MenuIds":[]},{"Id":"207b52cc-bda7-41be-b542-ac8d0128a072","No":2,"Name":"编辑","MenuIds":[]},{"Id":"a4a63230-4b49-4313-9dea-ac7700a2d58c","No":3,"Name":"作者","MenuIds":[]},{"Id":"24259b6b-99bf-48b8-9553-ac8d0128ae34","No":4,"Name":"读者","MenuIds":[]}]null::11448
2021-02-25 09:30:01.882 +08:00 [DBG] Connection ID "18230571323271152643" disconnecting.
2021-02-25 09:30:01.883 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 09:30:01.885 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Roles/all - - - 200 332 application/json;+charset=utf-8 1687.1764ms
2021-02-25 09:30:26.856 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Roles?pageIndex=1&pageSize=100 - -
2021-02-25 09:30:26.856 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:30:26.857 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Roles'
2021-02-25 09:30:26.857 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles' is valid for the request path '/api/Roles'
2021-02-25 09:30:26.858 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:26.865 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:30:26.866 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:26.876 +08:00 [INF] Route matched with {action = "Query", controller = "Roles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:30:26.876 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:30:26.876 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:30:26.876 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:30:26.876 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:30:26.876 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:30:26.877 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:26.877 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:26.882 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2021-02-25 09:30:26.884 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2021-02-25 09:30:26.885 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2021-02-25 09:30:26.885 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:30:26.885 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:30:26.885 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2021-02-25 09:30:26.886 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2021-02-25 09:30:26.887 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:30:26.887 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 09:30:26.888 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:26.888 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:26.888 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:30:26.889 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:26.889 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:30:26.889 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 09:30:26.889 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:26.889 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:26.889 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:30:26.889 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:26.914 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:30:26.918 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True)
    .Count()'
2021-02-25 09:30:26.925 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Role AS s), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 09:30:26.934 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:30:26.935 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:30:26.935 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.936 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.936 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
2021-02-25 09:30:26.939 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
2021-02-25 09:30:26.941 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:30:26.941 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.941 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.943 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 09:30:26.946 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoleDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoleDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoleDTO.Name (string), 1], [Property: RoleDTO.No (int) Required, 2], }
        SELECT s.Id, s.Name, s.No
        FROM S_Role AS s
        ORDER BY s.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoleDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:30:26.949 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:30:26.949 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:30:26.953 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.954 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.956 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 09:30:26.972 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 09:30:26.974 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:30:26.974 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.974 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:26.975 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 09:30:26.975 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 09:30:26.975 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 09:30:26.975 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 09:30:26.975 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 09:30:26.975 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 09:30:26.975 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 09:30:26.976 +08:00 [INF] Executed action UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API) in 99.9067ms
2021-02-25 09:30:26.977 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:26.977 +08:00 [INF]  "2021-02-25T09:30:26.9771509+08:00"GEThttpslocalhost:44303/api/Roles?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"2d197e9c-da20-44fa-890e-ac7700a18e6c","No":1,"Name":"管理员","MenuIds":[]},{"Id":"a4a63230-4b49-4313-9dea-ac7700a2d58c","No":3,"Name":"作者","MenuIds":[]},{"Id":"207b52cc-bda7-41be-b542-ac8d0128a072","No":2,"Name":"编辑","MenuIds":[]},{"Id":"24259b6b-99bf-48b8-9553-ac8d0128ae34","No":4,"Name":"读者","MenuIds":[]}]}null::1111
2021-02-25 09:30:26.977 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 09:30:26.977 +08:00 [DBG] Connection ID "17870283344491577499" disconnecting.
2021-02-25 09:30:26.978 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Roles?pageIndex=1&pageSize=100 - - - 200 352 application/json;+charset=utf-8 121.9714ms
2021-02-25 09:30:39.369 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Roles?name=%E7%AE%A1%E7%90%86%E5%91%98&pageIndex=1&pageSize=100 - -
2021-02-25 09:30:39.369 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:30:39.370 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Roles'
2021-02-25 09:30:39.370 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Roles' is valid for the request path '/api/Roles'
2021-02-25 09:30:39.371 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:39.374 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:30:39.374 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:39.374 +08:00 [INF] Route matched with {action = "Query", controller = "Roles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:30:39.374 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:30:39.374 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:30:39.374 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:30:39.375 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:30:39.375 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:30:39.375 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:39.377 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Roleing.API.Controllers.RolesController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:30:39.378 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2021-02-25 09:30:39.378 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2021-02-25 09:30:39.379 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:30:39.379 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2021-02-25 09:30:39.379 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2021-02-25 09:30:39.379 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2021-02-25 09:30:39.379 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:30:39.379 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 09:30:39.379 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:39.380 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:39.380 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:30:39.380 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:30:39.380 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:30:39.380 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 09:30:39.380 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:39.380 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:39.380 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:30:39.381 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:30:39.389 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:30:39.394 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True & Invoke(w => w.Name.Contains(__name_0), w)
    )
    .Count()'
2021-02-25 09:30:39.429 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Role AS s
            WHERE CAST(1 AS bit) & ((@__name_0 LIKE N'') || (CHARINDEX(@__name_0, s.Name) > 0))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 09:30:39.437 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:30:39.437 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:30:39.438 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.438 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.439 +08:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
2021-02-25 09:30:39.441 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
2021-02-25 09:30:39.442 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:30:39.442 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.442 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.443 +08:00 [DBG] Compiling query expression: 
'DbSet<RoleDTO>()
    .AsNoTracking()
    .Where(w => True & Invoke(w => w.Name.Contains(__name_0), w)
    )
    .OrderBy(o => o.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2021-02-25 09:30:39.446 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoleDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoleDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoleDTO.Name (string), 1], [Property: RoleDTO.No (int) Required, 2], }
        SELECT s.Id, s.Name, s.No
        FROM S_Role AS s
        WHERE CAST(1 AS bit) & ((@__name_0 LIKE N'') || (CHARINDEX(@__name_0, s.Name) > 0))
        ORDER BY s.Id ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoleDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:30:39.446 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:30:39.446 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:30:39.446 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.447 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.447 +08:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
ORDER BY [s].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2021-02-25 09:30:39.448 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Name], [s].[No]
FROM [S_Role] AS [s]
WHERE (CAST(1 AS bit) & CASE
    WHEN (@__name_0 LIKE N'') OR (CHARINDEX(@__name_0, [s].[Name]) > 0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END) = CAST(1 AS bit)
ORDER BY [s].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2021-02-25 09:30:39.448 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:30:39.448 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.448 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:30:39.449 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 09:30:39.449 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 09:30:39.449 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 09:30:39.449 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 09:30:39.449 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 09:30:39.449 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 09:30:39.449 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.RoleDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 09:30:39.449 +08:00 [INF] Executed action UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API) in 74.5846ms
2021-02-25 09:30:39.450 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Roleing.API.Controllers.RolesController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:30:39.451 +08:00 [INF]  "2021-02-25T09:30:39.4514334+08:00"GEThttpslocalhost:44303/api/Roles?name=%E7%AE%A1%E7%90%86%E5%91%98&pageIndex=1&pageSize=100{"Total":1,"Items":[{"Id":"2d197e9c-da20-44fa-890e-ac7700a18e6c","No":1,"Name":"管理员","MenuIds":[]}]}null::177
2021-02-25 09:30:39.451 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 09:30:39.452 +08:00 [DBG] Connection ID "17870283344491577501" disconnecting.
2021-02-25 09:30:39.452 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Roles?name=%E7%AE%A1%E7%90%86%E5%91%98&pageIndex=1&pageSize=100 - - - 200 106 application/json;+charset=utf-8 82.7700ms
2021-02-25 09:31:05.474 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 09:31:05.474 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:31:05.474 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 09:31:05.474 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 09:31:05.474 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:31:05.475 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:31:05.475 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:31:05.481 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:31:05.482 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:31:05.482 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:31:05.482 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:31:05.482 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:31:05.482 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:31:05.483 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:31:05.617 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:31:05.618 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:31:05.618 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 09:31:05.618 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:31:05.618 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:31:05.618 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 09:31:05.618 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 09:31:05.618 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:31:05.619 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 09:31:05.619 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:31:05.619 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:31:05.619 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 09:31:05.619 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 09:31:05.622 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:31:05.623 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 09:31:05.627 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 09:31:05.632 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:31:05.632 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:31:05.632 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.632 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.632 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 09:31:05.674 +08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 09:31:05.675 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:31:05.675 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.675 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.677 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 09:31:05.684 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 09:31:05.731 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:31:05.733 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:31:05.733 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 09:31:05.733 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.733 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.734 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 09:31:05.738 +08:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 09:31:05.739 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.739 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:31:05.755 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1485bf8e-3bcd-4315-b255-5c687d885695
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1485bf8e-3bcd-4315-b255-5c687d885695
Error Number:207,State:1,Class:16
2021-02-25 09:31:05.758 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 275.7887ms
2021-02-25 09:31:05.759 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:31:05.760 +08:00 [ERR]  "2021-02-25T09:30:39.4514334+08:00"GEThttpslocalhost:44303/api/Roles?name=%E7%AE%A1%E7%90%86%E5%91%98&pageIndex=1&pageSize=100One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)null::177
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 30
ClientConnectionId:1485bf8e-3bcd-4315-b255-5c687d885695
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method53(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 09:31:05.835 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 09:31:05.845 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 09:31:05.846 +08:00 [ERR] Connection ID "18374686507052041579", Request ID "8000056c-0006-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 09:31:05.850 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 09:31:05.850 +08:00 [DBG] Connection ID "18374686507052041579" disconnecting.
2021-02-25 09:31:05.850 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 376.3424ms
2021-02-25 09:33:27.345 +08:00 [DBG] Hosting starting
2021-02-25 09:33:27.397 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 09:33:27.403 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 09:33:27.411 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 09:33:27.416 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 09:33:27.423 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 09:33:27.429 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 09:33:27.437 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:33:27.440 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 09:33:27.441 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 09:33:27.445 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 09:33:27.447 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 09:33:27.450 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 09:33:27.451 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 09:33:27.585 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 09:33:27.585 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 09:33:27.585 +08:00 [INF] Hosting environment: Development
2021-02-25 09:33:27.585 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 09:33:27.585 +08:00 [DBG] Hosting started
2021-02-25 09:33:27.599 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 09:33:27.601 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 09:33:27.633 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:33:27.634 +08:00 [DBG] Connection ID "17870283344491577505" disconnecting.
2021-02-25 09:33:27.638 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 41.0538ms
2021-02-25 09:33:27.691 +08:00 [DBG] Connection ID "18374686507052041581" disconnecting.
2021-02-25 09:33:27.691 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 58.1148ms
2021-02-25 09:33:34.432 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 09:33:34.433 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 1.4214ms
2021-02-25 09:33:34.433 +08:00 [DBG] Connection ID "18086456109425492210" disconnecting.
2021-02-25 09:33:34.681 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - -
2021-02-25 09:33:34.687 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - -
2021-02-25 09:33:34.695 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-02-25 09:33:34.695 +08:00 [DBG] Connection ID "18086456122310394913" disconnecting.
2021-02-25 09:33:34.695 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - - - 200 628 image/png 7.7815ms
2021-02-25 09:33:34.858 +08:00 [DBG] Connection ID "17726168134940885027" disconnecting.
2021-02-25 09:33:34.858 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.0455ms
2021-02-25 09:33:40.097 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Users/all - -
2021-02-25 09:33:40.098 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 09:33:40.126 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Users/all'
2021-02-25 09:33:40.128 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users/all' is valid for the request path '/api/Users/all'
2021-02-25 09:33:40.128 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/all'
2021-02-25 09:33:40.129 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:33:40.335 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 09:33:40.344 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:33:40.350 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 09:33:40.359 +08:00 [INF] Route matched with {action = "QueryAll", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO]] QueryAll() on controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API).
2021-02-25 09:33:40.360 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 09:33:40.360 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 09:33:40.361 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 09:33:40.361 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 09:33:40.361 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 09:33:40.362 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:33:40.479 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 09:33:40.501 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 09:33:40.818 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 09:33:40.818 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 09:33:40.886 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:33:40.887 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:33:40.887 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:33:40.887 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:33:40.887 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 09:33:40.991 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 09:33:41.092 +08:00 [DBG] Compiling query expression: 
'DbSet<UserDTO>()
    .AsNoTracking()
    .OrderBy(o => o.Id)'
2021-02-25 09:33:41.228 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserDTO.AvatarUrl (string), 1], [Property: UserDTO.Disabled (bool) Required, 2], [Property: UserDTO.Gender (Gender) Required, 3], [Property: UserDTO.NickName (string), 4], [Property: UserDTO.No (int) Required, 5], [Property: UserDTO.Password (string), 6], [Property: UserDTO.PasswordAnswer (string), 7], [Property: UserDTO.PasswordQuestion (string), 8], [Property: UserDTO.UserName (string), 9], }
        SELECT s.Id, s.AvatarUrl, s.Disabled, s.Gender, s.NickName, s.No, s.Password, s.PasswordAnswer, s.PasswordQuestion, s.UserName
        FROM S_User AS s
        ORDER BY s.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 09:33:41.259 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 09:33:41.282 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (20ms).
2021-02-25 09:33:41.287 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:33:41.676 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:33:41.684 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
2021-02-25 09:33:41.718 +08:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
2021-02-25 09:33:41.735 +08:00 [DBG] A data reader was disposed.
2021-02-25 09:33:41.738 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:33:41.744 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 09:33:41.745 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 09:33:41.748 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 09:33:41.748 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 09:33:41.748 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 09:33:41.748 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 09:33:41.749 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 09:33:41.750 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 09:33:41.788 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API) in 1423.4507ms
2021-02-25 09:33:41.789 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 09:33:41.794 +08:00 [INF]  "2021-02-25T09:33:41.7892217+08:00"GEThttpslocalhost:44303/api/Users/all[{"Id":"583529ae-8263-4f96-54fc-08d88b70a4a2","No":3,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"作者","GenderName":"男","Gender":0,"UserName":"zuoz","Password":null,"PasswordQuestion":"1","PasswordAnswer":"1","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"d0cd8adc-dd2b-4183-9309-58367f0846ac","No":1,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"管理员","GenderName":"女","Gender":1,"UserName":"admin","Password":"admin888","PasswordQuestion":"admin","PasswordAnswer":"admin","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"8a4ca98f-be9c-42c4-adf3-ac8e00d94559","No":2,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/4_avatar_2754581.png","NickName":"编辑","GenderName":"男","Gender":0,"UserName":"bianj","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"57f3b482-6d4d-47ed-9505-ac8e00d97b34","No":4,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/3_avatar_2754581.png","NickName":"读者","GenderName":"女","Gender":1,"UserName":"duz","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]}]null::11445
2021-02-25 09:33:41.794 +08:00 [DBG] Connection ID "17365880173341181000" disconnecting.
2021-02-25 09:33:41.796 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 09:33:41.798 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Users/all - - - 200 1269 application/json;+charset=utf-8 1700.2377ms
2021-02-25 10:28:24.742 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Users?pageIndex=1&pageSize=100 - -
2021-02-25 10:28:24.743 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 10:28:24.744 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Users'
2021-02-25 10:28:24.744 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users' is valid for the request path '/api/Users'
2021-02-25 10:28:24.745 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 10:28:24.746 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 10:28:24.746 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 10:28:24.755 +08:00 [INF] Route matched with {action = "Query", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API).
2021-02-25 10:28:24.755 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 10:28:24.755 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 10:28:24.755 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 10:28:24.755 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 10:28:24.756 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 10:28:24.756 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 10:28:24.756 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 10:28:24.761 +08:00 [DBG] Attempting to bind parameter 'nickName' of type 'System.String' ...
2021-02-25 10:28:24.763 +08:00 [DBG] Attempting to bind parameter 'nickName' of type 'System.String' using the name '' in request data ...
2021-02-25 10:28:24.764 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'nickName' of type 'System.String'.
2021-02-25 10:28:24.765 +08:00 [DBG] Done attempting to bind parameter 'nickName' of type 'System.String'.
2021-02-25 10:28:24.765 +08:00 [DBG] Done attempting to bind parameter 'nickName' of type 'System.String'.
2021-02-25 10:28:24.765 +08:00 [DBG] Attempting to validate the bound parameter 'nickName' of type 'System.String' ...
2021-02-25 10:28:24.766 +08:00 [DBG] Done attempting to validate the bound parameter 'nickName' of type 'System.String'.
2021-02-25 10:28:24.768 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 10:28:24.768 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 10:28:24.769 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 10:28:24.769 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 10:28:24.769 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 10:28:24.770 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 10:28:24.770 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 10:28:24.770 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 10:28:24.770 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 10:28:24.770 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 10:28:24.770 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 10:28:24.771 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 10:28:24.796 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 10:28:24.798 +08:00 [DBG] Compiling query expression: 
'DbSet<UserDTO>()
    .AsNoTracking()
    .Count()'
2021-02-25 10:28:24.804 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_User AS s), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 10:28:24.810 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 10:28:24.811 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 10:28:24.811 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.811 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.812 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_User] AS [s]
2021-02-25 10:28:24.814 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_User] AS [s]
2021-02-25 10:28:24.816 +08:00 [DBG] A data reader was disposed.
2021-02-25 10:28:24.816 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.816 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.818 +08:00 [DBG] Compiling query expression: 
'DbSet<UserDTO>()
    .AsNoTracking()
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 10:28:24.822 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserDTO.AvatarUrl (string), 1], [Property: UserDTO.Disabled (bool) Required, 2], [Property: UserDTO.Gender (Gender) Required, 3], [Property: UserDTO.NickName (string), 4], [Property: UserDTO.No (int) Required, 5], [Property: UserDTO.Password (string), 6], [Property: UserDTO.PasswordAnswer (string), 7], [Property: UserDTO.PasswordQuestion (string), 8], [Property: UserDTO.UserName (string), 9], }
        SELECT s.Id, s.AvatarUrl, s.Disabled, s.Gender, s.NickName, s.No, s.Password, s.PasswordAnswer, s.PasswordQuestion, s.UserName
        FROM S_User AS s
        ORDER BY s.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 10:28:24.825 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 10:28:24.825 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 10:28:24.828 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.829 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.831 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 10:28:24.847 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 10:28:24.848 +08:00 [DBG] A data reader was disposed.
2021-02-25 10:28:24.849 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.849 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 10:28:24.849 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 10:28:24.849 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 10:28:24.850 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 10:28:24.850 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 10:28:24.850 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 10:28:24.850 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 10:28:24.850 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 10:28:24.852 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API) in 95.8596ms
2021-02-25 10:28:24.852 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 10:28:24.852 +08:00 [INF]  "2021-02-25T10:28:24.8524523+08:00"GEThttpslocalhost:44303/api/Users?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"583529ae-8263-4f96-54fc-08d88b70a4a2","No":3,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"作者","GenderName":"男","Gender":0,"UserName":"zuoz","Password":null,"PasswordQuestion":"1","PasswordAnswer":"1","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"d0cd8adc-dd2b-4183-9309-58367f0846ac","No":1,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"管理员","GenderName":"女","Gender":1,"UserName":"admin","Password":"admin888","PasswordQuestion":"admin","PasswordAnswer":"admin","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"8a4ca98f-be9c-42c4-adf3-ac8e00d94559","No":2,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/4_avatar_2754581.png","NickName":"编辑","GenderName":"男","Gender":0,"UserName":"bianj","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"57f3b482-6d4d-47ed-9505-ac8e00d97b34","No":4,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/3_avatar_2754581.png","NickName":"读者","GenderName":"女","Gender":1,"UserName":"duz","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]}]}null::1105
2021-02-25 10:28:24.853 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 10:28:24.853 +08:00 [DBG] Connection ID "17870283344491577515" disconnecting.
2021-02-25 10:28:24.853 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Users?pageIndex=1&pageSize=100 - - - 200 1289 application/json;+charset=utf-8 110.6927ms
2021-02-25 11:05:30.834 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Users/all - -
2021-02-25 11:05:30.834 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:05:30.835 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Users/all'
2021-02-25 11:05:30.835 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users/all' is valid for the request path '/api/Users/all'
2021-02-25 11:05:30.835 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/all'
2021-02-25 11:05:30.835 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:30.841 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:05:30.842 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:30.842 +08:00 [INF] Route matched with {action = "QueryAll", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO]] QueryAll() on controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:05:30.842 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:05:30.842 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:05:30.843 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:05:30.843 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:05:30.843 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:05:30.843 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:30.845 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:30.850 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:05:30.853 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:05:30.853 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:05:30.853 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:30.853 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:30.853 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
2021-02-25 11:05:30.857 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
2021-02-25 11:05:30.857 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:05:30.857 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:30.857 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:30.858 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:05:30.858 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:05:30.858 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:05:30.858 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:05:30.858 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:05:30.858 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:05:30.858 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:05:30.859 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API) in 15.8819ms
2021-02-25 11:05:30.859 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.QueryAll (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:30.859 +08:00 [INF]  "2021-02-25T11:05:30.8595905+08:00"GEThttpslocalhost:44303/api/Users/all[{"Id":"583529ae-8263-4f96-54fc-08d88b70a4a2","No":3,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"作者","GenderName":"男","Gender":0,"UserName":"zuoz","Password":null,"PasswordQuestion":"1","PasswordAnswer":"1","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"d0cd8adc-dd2b-4183-9309-58367f0846ac","No":1,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"管理员","GenderName":"女","Gender":1,"UserName":"admin","Password":"admin888","PasswordQuestion":"admin","PasswordAnswer":"admin","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"8a4ca98f-be9c-42c4-adf3-ac8e00d94559","No":2,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/4_avatar_2754581.png","NickName":"编辑","GenderName":"男","Gender":0,"UserName":"bianj","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"57f3b482-6d4d-47ed-9505-ac8e00d97b34","No":4,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/3_avatar_2754581.png","NickName":"读者","GenderName":"女","Gender":1,"UserName":"duz","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]}]null::117
2021-02-25 11:05:30.860 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:05:30.860 +08:00 [DBG] Connection ID "17726168134940885039" disconnecting.
2021-02-25 11:05:30.860 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Users/all - - - 200 1269 application/json;+charset=utf-8 26.0417ms
2021-02-25 11:05:38.402 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Users?pageIndex=1&pageSize=100 - -
2021-02-25 11:05:38.403 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:05:38.403 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Users'
2021-02-25 11:05:38.403 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Users' is valid for the request path '/api/Users'
2021-02-25 11:05:38.403 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:38.403 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:05:38.404 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:38.404 +08:00 [INF] Route matched with {action = "Query", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO]] Query(System.String, Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:05:38.404 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:05:38.404 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:05:38.404 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:05:38.404 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:05:38.405 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:05:38.405 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:38.405 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.UsersController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:38.406 +08:00 [DBG] Attempting to bind parameter 'nickName' of type 'System.String' ...
2021-02-25 11:05:38.406 +08:00 [DBG] Attempting to bind parameter 'nickName' of type 'System.String' using the name '' in request data ...
2021-02-25 11:05:38.406 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'nickName' of type 'System.String'.
2021-02-25 11:05:38.406 +08:00 [DBG] Done attempting to bind parameter 'nickName' of type 'System.String'.
2021-02-25 11:05:38.406 +08:00 [DBG] Done attempting to bind parameter 'nickName' of type 'System.String'.
2021-02-25 11:05:38.407 +08:00 [DBG] Attempting to validate the bound parameter 'nickName' of type 'System.String' ...
2021-02-25 11:05:38.407 +08:00 [DBG] Done attempting to validate the bound parameter 'nickName' of type 'System.String'.
2021-02-25 11:05:38.407 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:05:38.407 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:05:38.407 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:38.407 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:38.407 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:05:38.407 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:38.408 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:05:38.408 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:05:38.408 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:38.408 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:38.408 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:05:38.408 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:38.409 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:05:38.409 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:05:38.409 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:05:38.410 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.410 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.410 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_User] AS [s]
2021-02-25 11:05:38.411 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_User] AS [s]
2021-02-25 11:05:38.412 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:05:38.412 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.412 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:05:38.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:05:38.413 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.414 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.414 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 11:05:38.416 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AvatarUrl], [s].[Disabled], [s].[Gender], [s].[NickName], [s].[No], [s].[Password], [s].[PasswordAnswer], [s].[PasswordQuestion], [s].[UserName]
FROM [S_User] AS [s]
ORDER BY [s].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2021-02-25 11:05:38.416 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:05:38.416 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.417 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:38.417 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:05:38.417 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:05:38.418 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:05:38.418 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:05:38.418 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:05:38.418 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:05:38.418 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.UserDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:05:38.419 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API) in 13.7984ms
2021-02-25 11:05:38.419 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.UsersController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:38.419 +08:00 [INF]  "2021-02-25T11:05:38.4194063+08:00"GEThttpslocalhost:44303/api/Users?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"583529ae-8263-4f96-54fc-08d88b70a4a2","No":3,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"作者","GenderName":"男","Gender":0,"UserName":"zuoz","Password":null,"PasswordQuestion":"1","PasswordAnswer":"1","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"d0cd8adc-dd2b-4183-9309-58367f0846ac","No":1,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/5_avatar_2754581.png","NickName":"管理员","GenderName":"女","Gender":1,"UserName":"admin","Password":"admin888","PasswordQuestion":"admin","PasswordAnswer":"admin","Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"8a4ca98f-be9c-42c4-adf3-ac8e00d94559","No":2,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/4_avatar_2754581.png","NickName":"编辑","GenderName":"男","Gender":0,"UserName":"bianj","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]},{"Id":"57f3b482-6d4d-47ed-9505-ac8e00d97b34","No":4,"AvatarUrl":"https://d.lanrentuku.com/down/png/1904/business_avatar/3_avatar_2754581.png","NickName":"读者","GenderName":"女","Gender":1,"UserName":"duz","Password":"1","PasswordQuestion":null,"PasswordAnswer":null,"Disabled":false,"RoleIds":[],"Roles":[]}]}null::115
2021-02-25 11:05:38.419 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:05:38.420 +08:00 [DBG] Connection ID "17365880173341181030" disconnecting.
2021-02-25 11:05:38.420 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Users?pageIndex=1&pageSize=100 - - - 200 1289 application/json;+charset=utf-8 17.5748ms
2021-02-25 11:05:50.876 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:05:50.876 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:05:50.876 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:05:50.876 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:05:50.877 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:50.877 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:05:50.877 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:50.888 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:05:50.888 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:05:50.888 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:05:50.889 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:05:50.889 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:05:50.889 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:05:50.889 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:51.074 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:05:51.074 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:05:51.076 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:05:51.076 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:51.076 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:51.076 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:05:51.076 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:05:51.077 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:05:51.077 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:05:51.077 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:51.077 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:51.077 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:05:51.077 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:05:51.081 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:05:51.084 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:05:51.099 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:05:51.106 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:05:51.106 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:05:51.106 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.107 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.107 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:05:51.118 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:05:51.118 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:05:51.118 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.118 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.122 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:05:51.146 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:05:51.228 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:05:51.230 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:05:51.230 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:05:51.230 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.231 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.231 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:05:51.235 +08:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:05:51.236 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.237 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:05:51.280 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:34423014-6ee0-4ef7-be7a-f16590ea8bd4
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:34423014-6ee0-4ef7-be7a-f16590ea8bd4
Error Number:207,State:1,Class:16
2021-02-25 11:05:51.284 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 394.5345ms
2021-02-25 11:05:51.284 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:05:51.285 +08:00 [ERR]  "2021-02-25T11:05:38.4194063+08:00"GEThttpslocalhost:44303/api/Users?pageIndex=1&pageSize=100One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)null::115
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 30
ClientConnectionId:34423014-6ee0-4ef7-be7a-f16590ea8bd4
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method58(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:05:51.425 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:05:51.466 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:05:51.467 +08:00 [ERR] Connection ID "17365880173341181032", Request ID "80000469-0002-f100-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:05:51.470 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:05:51.470 +08:00 [DBG] Connection ID "17365880173341181032" disconnecting.
2021-02-25 11:05:51.470 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 594.4925ms
2021-02-25 11:08:05.666 +08:00 [DBG] Hosting starting
2021-02-25 11:08:05.725 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:08:05.730 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:08:05.737 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:08:05.742 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:08:05.748 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:08:05.756 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:08:05.765 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:08:05.769 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:08:05.770 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:08:05.773 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:08:05.775 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:08:05.779 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:08:05.780 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:08:05.916 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:08:05.916 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:08:05.917 +08:00 [INF] Hosting environment: Development
2021-02-25 11:08:05.917 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:08:05.917 +08:00 [DBG] Hosting started
2021-02-25 11:08:05.935 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:08:05.937 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:08:05.967 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:08:05.998 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:08:06.002 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:08:06.003 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:08:06.206 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:08:06.208 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:08:06.215 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:08:06.236 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:08:06.237 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:08:06.238 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:08:06.238 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:08:06.238 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:08:06.238 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:08:06.239 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:08:06.357 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:08:06.524 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:08:06.530 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:08:06.533 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:08:06.533 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:06.533 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:06.533 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:08:06.534 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:06.535 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:08:06.536 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:08:06.536 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:06.536 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:06.536 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:08:06.536 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:06.897 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:08:06.897 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:08:06.968 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:06.969 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:06.969 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:06.969 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:06.969 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:07.086 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:08:07.221 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:08:07.349 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:08:07.388 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:08:07.417 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (26ms).
2021-02-25 11:08:07.423 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.816 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.823 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:08:07.862 +08:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:08:07.877 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:08:07.879 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.883 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.891 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:08:07.904 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:08:07.986 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:08:07.994 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:08:07.994 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:08:07.996 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.997 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:07.999 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:08:08.020 +08:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:08:08.021 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:08.021 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:08.037 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e9a5309f-8dc8-4a8f-acf6-f9275cfceabb
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e9a5309f-8dc8-4a8f-acf6-f9275cfceabb
Error Number:207,State:1,Class:16
2021-02-25 11:08:08.048 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 1803.8684ms
2021-02-25 11:08:08.049 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:08:08.051 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullOne or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)nullnull0
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 33
ClientConnectionId:e9a5309f-8dc8-4a8f-acf6-f9275cfceabb
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method6(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:08:08.157 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:08:08.165 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:08:08.166 +08:00 [ERR] Connection ID "18086456109425492224", Request ID "80000101-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:08:08.176 +08:00 [DBG] Connection ID "18086456109425492224" disconnecting.
2021-02-25 11:08:08.178 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:08:08.181 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 2249.5191ms
2021-02-25 11:08:20.154 +08:00 [DBG] Hosting starting
2021-02-25 11:08:20.254 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:08:20.267 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:08:20.286 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:08:20.293 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:08:20.301 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:08:20.311 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:08:20.331 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:08:20.334 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:08:20.337 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:08:20.342 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:08:20.346 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:08:20.350 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:08:20.352 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:08:20.557 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:08:20.559 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:08:20.561 +08:00 [INF] Hosting environment: Development
2021-02-25 11:08:20.563 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:08:20.570 +08:00 [DBG] Hosting started
2021-02-25 11:08:20.594 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:08:20.606 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:08:20.678 +08:00 [DBG] Connection ID "18086456109425492226" disconnecting.
2021-02-25 11:08:20.678 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:08:20.692 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 100.1711ms
2021-02-25 11:08:20.801 +08:00 [DBG] Connection ID "18086456122310394931" disconnecting.
2021-02-25 11:08:20.801 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 128.5385ms
2021-02-25 11:08:21.185 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:08:21.192 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:08:21.243 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:08:21.249 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:08:21.252 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:08:21.477 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:08:21.482 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:08:21.493 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:08:21.524 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:08:21.528 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:08:21.531 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:08:21.533 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:08:21.535 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:08:21.537 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:08:21.540 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:08:21.641 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:08:21.834 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:08:21.842 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:08:21.847 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:08:21.850 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:21.851 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:21.853 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:08:21.857 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:08:21.861 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:08:21.863 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:08:21.866 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:21.868 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:21.869 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:08:21.871 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:08:21.931 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:08:22.325 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:08:22.327 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:08:22.404 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:22.406 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:22.408 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:22.410 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:22.413 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:08:22.533 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:08:22.731 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:08:22.873 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:08:22.917 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:08:22.954 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (34ms).
2021-02-25 11:08:22.960 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.416 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.427 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:08:23.509 +08:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:08:23.532 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:08:23.538 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.546 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.557 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:08:23.577 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:08:23.672 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:08:23.684 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:08:23.686 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2021-02-25 11:08:23.692 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.694 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.699 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:08:23.726 +08:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:08:23.729 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.731 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:08:23.767 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d913f1fe-2e1f-4e2c-9892-843f9e9f88e8
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d913f1fe-2e1f-4e2c-9892-843f9e9f88e8
Error Number:207,State:1,Class:16
2021-02-25 11:08:23.906 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 2363.2964ms
2021-02-25 11:08:23.909 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:12:40.877 +08:00 [DBG] Hosting starting
2021-02-25 11:12:41.008 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:12:41.022 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:12:41.041 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:12:41.047 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:12:41.054 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:12:41.062 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:12:41.073 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:12:41.082 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:12:41.085 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:12:41.089 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:12:41.094 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:12:41.099 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:12:41.101 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:12:41.295 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:12:41.296 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:12:41.297 +08:00 [INF] Hosting environment: Development
2021-02-25 11:12:41.298 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:12:41.300 +08:00 [DBG] Hosting started
2021-02-25 11:12:41.328 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:12:41.331 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:12:41.392 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:12:41.402 +08:00 [DBG] Connection ID "17870283344491577529" disconnecting.
2021-02-25 11:12:41.442 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 118.4358ms
2021-02-25 11:12:41.514 +08:00 [DBG] Connection ID "17365880173341181034" disconnecting.
2021-02-25 11:12:41.516 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 122.9239ms
2021-02-25 11:12:53.031 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:12:53.035 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:12:53.070 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:12:53.076 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:12:53.080 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:12:53.137 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:12:53.142 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:12:53.154 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:12:53.191 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:12:53.194 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:12:53.196 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:12:53.198 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:12:53.201 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:12:53.204 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:12:53.207 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:12:53.309 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:12:53.519 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:12:53.528 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:12:53.535 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:12:53.538 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:12:53.540 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:12:53.542 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:12:53.546 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:12:53.550 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:12:53.552 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:12:53.553 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:12:53.554 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:12:53.556 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:12:53.558 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:12:53.615 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:12:54.018 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:12:54.020 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:12:54.107 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:12:54.109 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:12:54.111 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:12:54.112 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:12:54.115 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:12:54.268 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:12:54.345 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:12:54.469 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:12:54.514 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:12:54.550 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (32ms).
2021-02-25 11:12:54.556 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:54.904 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:54.915 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:12:54.962 +08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:12:54.984 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:12:54.989 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:54.996 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:55.006 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:12:55.025 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:12:55.119 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:12:55.131 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:12:55.134 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:12:55.140 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:55.142 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:55.146 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:12:55.173 +08:00 [ERR] Failed executing DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:12:55.176 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:55.177 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:12:55.211 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c62cccfa-6462-415b-a3f6-b2be12c97d5f
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c62cccfa-6462-415b-a3f6-b2be12c97d5f
Error Number:207,State:1,Class:16
2021-02-25 11:12:55.347 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 2136.6351ms
2021-02-25 11:12:55.350 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:13:37.956 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullOne or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)nullnull0
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 33
ClientConnectionId:c62cccfa-6462-415b-a3f6-b2be12c97d5f
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method6(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:13:38.150 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:13:38.172 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:13:38.175 +08:00 [ERR] Connection ID "18086456109425492228", Request ID "80000105-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:13:38.182 +08:00 [DBG] Connection ID "18086456109425492228" disconnecting.
2021-02-25 11:13:38.186 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:13:38.190 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 45158.3010ms
2021-02-25 11:15:37.019 +08:00 [DBG] Hosting starting
2021-02-25 11:15:37.113 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:15:37.127 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:15:37.147 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:15:37.155 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:15:37.162 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:15:37.172 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:15:37.184 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:15:37.194 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:15:37.197 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:15:37.203 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:15:37.208 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:15:37.212 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:15:37.215 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:15:37.428 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:15:37.430 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:15:37.432 +08:00 [INF] Hosting environment: Development
2021-02-25 11:15:37.434 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:15:37.442 +08:00 [DBG] Hosting started
2021-02-25 11:15:37.474 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:15:37.479 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:15:37.549 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:15:37.549 +08:00 [DBG] Connection ID "18230571323271152663" disconnecting.
2021-02-25 11:15:37.567 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 97.4450ms
2021-02-25 11:15:37.645 +08:00 [DBG] Connection ID "18158513716348321808" disconnecting.
2021-02-25 11:15:37.646 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 96.9989ms
2021-02-25 11:15:42.694 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:15:42.704 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:15:42.735 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:15:42.740 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:15:42.743 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:15:42.799 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:15:42.805 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:15:42.815 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:15:42.848 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:15:42.851 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:15:42.854 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:15:42.856 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:15:42.858 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:15:42.860 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:15:42.863 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:15:42.959 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:15:43.143 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:15:43.151 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:15:43.157 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:15:43.159 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:43.161 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:43.163 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:15:43.168 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:43.172 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:15:43.175 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:15:43.177 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:43.179 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:43.181 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:15:43.183 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:43.244 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:15:43.675 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:15:43.677 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:15:43.751 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:15:43.754 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:15:43.756 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:15:43.757 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:15:43.758 +08:00 [DBG] The property 'MenuDTOId.MenuDTO' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:15:43.890 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:15:43.971 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:15:44.122 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:15:44.171 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:15:44.207 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (33ms).
2021-02-25 11:15:44.213 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.544 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.555 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:15:44.601 +08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:15:44.627 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:15:44.631 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.640 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.649 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:15:44.671 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:15:44.780 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.MenuDTOId, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.MenuDTOId, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.MenuDTOId, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.MenuDTOId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:15:44.790 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:15:44.792 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2021-02-25 11:15:44.796 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.798 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.802 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:15:44.824 +08:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:15:44.827 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.829 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:44.865 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
2021-02-25 11:15:45.020 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 2153.8396ms
2021-02-25 11:15:45.023 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:15:48.827 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullOne or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)nullnull0
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 33
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method6(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:15:49.068 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:15:49.087 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:15:49.091 +08:00 [ERR] Connection ID "18158513716348321810", Request ID "80000013-0004-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:15:49.098 +08:00 [DBG] Connection ID "18158513716348321810" disconnecting.
2021-02-25 11:15:49.102 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:15:49.108 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 6413.7953ms
2021-02-25 11:15:53.314 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:15:53.317 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:15:53.320 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:15:53.323 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:15:53.325 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:15:53.328 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:15:53.330 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:15:53.333 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:15:53.335 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:15:53.336 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:15:53.338 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:15:53.340 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:15:53.344 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:15:53.346 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:15:53.349 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:15:53.350 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:15:53.352 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:15:53.353 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:53.355 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:53.356 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:15:53.358 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:15:53.360 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:15:53.363 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:15:53.366 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:53.367 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:53.369 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:15:53.371 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:15:53.392 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:15:53.419 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:15:53.425 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:15:53.427 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:15:53.430 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.432 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.434 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:15:53.439 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:15:53.442 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:15:53.444 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.447 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:15:53.452 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:15:53.454 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.456 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.458 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:15:53.463 +08:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[MenuDTOId], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[MenuDTOId], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[MenuDTOId], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[MenuDTOId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:15:53.465 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.467 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:15:53.470 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
2021-02-25 11:15:53.569 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 222.6857ms
2021-02-25 11:15:53.571 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:16:52.226 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullOne or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)nullnull0
System.AggregateException: One or more errors occurred. (列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
列名 'MenuDTOId' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UltraNuke.Barasingha.Permission.API.Application.Queries.MenuQueries.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Application\Queries\MenuQueries.cs:line 33
ClientConnectionId:210212eb-702a-40be-b519-536cbff3ce45
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query(Int32 pageIndex, Int32 pageSize) in F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API\Controllers\MenusController.cs:line 40
   at lambda_method6(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:16:52.344 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:16:52.350 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:16:52.382 +08:00 [ERR] Connection ID "18158513716348321812", Request ID "80000015-0004-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:16:52.388 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:16:52.390 +08:00 [DBG] Connection ID "18158513716348321812" disconnecting.
2021-02-25 11:16:52.392 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 59077.8066ms
2021-02-25 11:19:56.417 +08:00 [DBG] Hosting starting
2021-02-25 11:19:56.534 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:19:56.542 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:19:56.569 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:19:56.576 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:19:56.585 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:19:56.596 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:19:56.610 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:19:56.619 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:19:56.622 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:19:56.627 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:19:56.632 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:19:56.637 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:19:56.640 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:19:56.951 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:19:56.953 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:19:56.954 +08:00 [INF] Hosting environment: Development
2021-02-25 11:19:56.956 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:19:56.962 +08:00 [DBG] Hosting started
2021-02-25 11:19:56.994 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:19:56.997 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:19:57.064 +08:00 [DBG] Connection ID "18374686507052041615" disconnecting.
2021-02-25 11:19:57.064 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:19:57.074 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 85.2177ms
2021-02-25 11:19:57.157 +08:00 [DBG] Connection ID "17654110549492892420" disconnecting.
2021-02-25 11:19:57.157 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 93.2167ms
2021-02-25 11:20:02.681 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:20:02.685 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:20:02.718 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:20:02.723 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:20:02.727 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:20:02.990 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:20:02.996 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:20:03.006 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:20:03.041 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:20:03.044 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:20:03.046 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:20:03.048 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:20:03.051 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:20:03.052 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:20:03.055 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:20:03.291 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:20:03.477 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:20:03.485 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:20:03.489 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:20:03.493 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:03.495 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:03.496 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:20:03.499 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:03.502 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:20:03.504 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:20:03.506 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:03.507 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:03.509 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:20:03.511 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:03.566 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:20:04.032 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:20:04.034 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:20:04.114 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:20:04.117 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:20:04.119 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:20:04.120 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:20:04.244 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:20:04.471 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:20:04.614 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:20:04.658 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:20:04.699 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (38ms).
2021-02-25 11:20:04.708 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.123 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.135 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:20:05.191 +08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:20:05.214 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:20:05.220 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.227 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.235 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:20:05.251 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:20:05.346 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.ParentNodeId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:20:05.358 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:20:05.361 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:20:05.366 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.369 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.374 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:20:05.406 +08:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:20:05.425 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:20:05.427 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:05.430 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:08.041 +08:00 [INF] Executed action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4469.1851ms.
2021-02-25 11:20:08.047 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:20:08.052 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:20:08.055 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:20:08.057 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:20:08.060 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:20:08.063 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:20:08.065 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:20:08.237 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 5177.6899ms
2021-02-25 11:20:08.240 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:20:39.810 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullSelf referencing loop detected for property 'ParentNode' with type 'UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO'. Path 'Items[2].ChildNodes[0]'.nullnull0
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'ParentNode' with type 'UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO'. Path 'Items[2].ChildNodes[0]'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:20:39.956 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:20:39.973 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:20:39.976 +08:00 [ERR] Connection ID "17654110549492892422", Request ID "80000307-0002-f500-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:20:39.983 +08:00 [DBG] Connection ID "17654110549492892422" disconnecting.
2021-02-25 11:20:39.986 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:20:39.989 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 37307.8280ms
2021-02-25 11:20:46.800 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:20:46.802 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:20:46.811 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:20:46.815 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:20:46.817 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:20:46.829 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:20:46.830 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:20:46.831 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:20:46.832 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:20:46.834 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:20:46.835 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:20:46.836 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:20:46.837 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:20:46.838 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:20:46.840 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:20:46.842 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:20:46.844 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:20:46.845 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:46.846 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:46.847 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:20:46.848 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:20:46.850 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:20:46.851 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:20:46.852 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:46.853 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:46.854 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:20:46.856 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:20:46.873 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:20:46.898 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:20:46.903 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:20:46.904 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2021-02-25 11:20:46.906 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.907 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.909 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:20:46.914 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:20:46.924 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:20:46.925 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.927 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.930 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:20:46.931 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2021-02-25 11:20:46.932 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.933 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.935 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:20:46.938 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:20:46.941 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:20:46.942 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:20:46.944 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:21:22.823 +08:00 [INF] Executed action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35948.7517ms.
2021-02-25 11:21:22.839 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:21:22.849 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:21:22.851 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:21:22.853 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:21:22.854 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:21:22.857 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:21:22.859 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:21:22.863 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 36025.0195ms
2021-02-25 11:21:22.866 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:35.462 +08:00 [DBG] Hosting starting
2021-02-25 11:22:35.557 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:22:35.572 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:22:35.594 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:22:35.602 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:22:35.611 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:22:35.621 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:22:35.637 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:22:35.642 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:22:35.644 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:22:35.648 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:22:35.652 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:22:35.657 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:22:35.660 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:22:35.843 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:22:35.844 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:22:35.846 +08:00 [INF] Hosting environment: Development
2021-02-25 11:22:35.847 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:22:35.849 +08:00 [DBG] Hosting started
2021-02-25 11:22:35.877 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:22:35.880 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:22:35.940 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:22:35.942 +08:00 [DBG] Connection ID "18230571306091283297" disconnecting.
2021-02-25 11:22:35.980 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 106.1645ms
2021-02-25 11:22:36.057 +08:00 [DBG] Connection ID "17870283323016741734" disconnecting.
2021-02-25 11:22:36.059 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 116.6458ms
2021-02-25 11:22:38.550 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:22:38.553 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:22:38.585 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:22:38.590 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:22:38.594 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:38.646 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:22:38.652 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:38.662 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:22:38.698 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:22:38.701 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:22:38.705 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:22:38.707 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:22:38.710 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:22:38.712 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:22:38.715 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:22:38.810 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:22:39.002 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:22:39.009 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:22:39.016 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:22:39.019 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:39.021 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:39.022 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:22:39.026 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:39.029 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:22:39.031 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:22:39.032 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:39.034 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:39.036 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:22:39.038 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:39.095 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:22:39.518 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:22:39.521 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:22:39.600 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:22:39.603 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:22:39.605 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:22:39.607 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:22:39.731 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:22:39.832 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:22:39.956 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:22:40.003 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:22:40.041 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (36ms).
2021-02-25 11:22:40.049 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.380 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.391 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:22:40.432 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:22:40.455 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:22:40.459 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.467 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.475 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:22:40.493 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:22:40.586 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.ParentNodeId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:22:40.597 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:22:40.598 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2021-02-25 11:22:40.603 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.605 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.610 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:22:40.635 +08:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:22:40.654 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:22:40.657 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:40.659 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:43.217 +08:00 [INF] Executed action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4100.6562ms.
2021-02-25 11:22:43.231 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:22:43.236 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:22:43.239 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:22:43.241 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:22:43.243 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:22:43.246 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:22:43.248 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:22:43.376 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 4657.1991ms
2021-02-25 11:22:43.379 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:45.168 +08:00 [ERR]  "0001-01-01T00:00:00.0000000"nullnullnullnullnullnullSelf referencing loop detected for property 'ParentNode' with type 'UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO'. Path 'Items[2].ChildNodes[0]'.nullnull0
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'ParentNode' with type 'UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO'. Path 'Items[2].ChildNodes[0]'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 43
2021-02-25 11:22:45.286 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:22:45.304 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-25 11:22:45.309 +08:00 [ERR] Connection ID "17870283323016741736", Request ID "80000369-0000-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, CancellationToken cancellationToken)
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.HandleExceptionAsync(HttpContext context, Exception ex) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 111
   at UltraNuke.CommonMormon.Utils.Middlewares.ApiLogMiddleware.Invoke(HttpContext context) in F:\self-product\CommonMormon\src\Utils\Middlewares\ApiLogMiddleware.cs:line 64
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2021-02-25 11:22:45.314 +08:00 [DBG] Connection ID "17870283323016741736" disconnecting.
2021-02-25 11:22:45.318 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:22:45.322 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 500 - - 6772.1900ms
2021-02-25 11:22:48.883 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:22:48.885 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:22:48.897 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:22:48.899 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:22:48.901 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:48.906 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:22:48.909 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:22:48.912 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:22:48.914 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:22:48.915 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:22:48.917 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:22:48.918 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:22:48.919 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:22:48.921 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:22:48.923 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:22:48.925 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:22:48.927 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:22:48.929 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:48.930 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:48.932 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:22:48.933 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:22:48.935 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:22:48.936 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:22:48.938 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:48.939 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:48.940 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:22:48.942 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:22:48.959 +08:00 [INF] Executing action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) - Validation state: "Valid"
2021-02-25 11:22:48.987 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:22:48.991 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:22:48.994 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:22:48.996 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:48.998 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.000 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:22:49.003 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:22:49.005 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:22:49.007 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.009 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.011 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:22:49.013 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2021-02-25 11:22:49.015 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.017 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.019 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:22:49.021 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:22:49.023 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:22:49.025 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:49.028 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:22:53.985 +08:00 [INF] Executed action method UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 5023.075ms.
2021-02-25 11:22:54.019 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:22:54.021 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:22:54.023 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:22:54.024 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:22:54.026 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:22:54.027 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:22:54.028 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:23:11.802 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 22880.9409ms
2021-02-25 11:23:11.803 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:26:39.116 +08:00 [DBG] Hosting starting
2021-02-25 11:26:39.169 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:26:39.174 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:26:39.180 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:26:39.185 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:26:39.191 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:26:39.199 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:26:39.208 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:26:39.210 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:26:39.211 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:26:39.214 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:26:39.217 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:26:39.221 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:26:39.222 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:26:39.363 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:26:39.363 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:26:39.363 +08:00 [INF] Hosting environment: Development
2021-02-25 11:26:39.363 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:26:39.364 +08:00 [DBG] Hosting started
2021-02-25 11:26:39.377 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger - -
2021-02-25 11:26:39.379 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:26:39.411 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:26:39.413 +08:00 [DBG] Connection ID "17365880173341181047" disconnecting.
2021-02-25 11:26:39.415 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger - - - 301 - - 40.8548ms
2021-02-25 11:26:39.470 +08:00 [DBG] Connection ID "18374686507052041617" disconnecting.
2021-02-25 11:26:39.470 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 58.3078ms
2021-02-25 11:26:56.038 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 11:26:56.040 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:26:56.068 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 11:26:56.071 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 11:26:56.072 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:26:56.276 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:26:56.279 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:26:56.286 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:26:56.308 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:26:56.309 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:26:56.309 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:26:56.310 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:26:56.310 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:26:56.310 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:26:56.311 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:26:56.431 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:26:56.588 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:26:56.594 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:26:56.596 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 11:26:56.597 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:26:56.597 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:26:56.597 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 11:26:56.598 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 11:26:56.599 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:26:56.599 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 11:26:56.600 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:26:56.600 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:26:56.600 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 11:26:56.600 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 11:26:56.946 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:26:56.946 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:26:57.020 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:26:57.020 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:26:57.020 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:26:57.020 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:26:57.136 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:26:57.264 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 11:26:57.372 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 11:26:57.411 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:26:57.435 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (20ms).
2021-02-25 11:26:57.440 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.803 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.811 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:26:57.845 +08:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 11:26:57.861 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:26:57.864 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.868 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.874 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 11:26:57.889 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 11:26:57.971 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.ParentNodeId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:26:57.979 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:26:57.979 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 11:26:57.982 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.982 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:57.984 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:26:58.004 +08:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 11:26:58.016 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:26:58.017 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:58.017 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:26:58.018 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:26:58.020 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:26:58.021 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:26:58.021 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:26:58.021 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:26:58.022 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:26:58.022 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:26:58.115 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 1801.4637ms
2021-02-25 11:26:58.116 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:26:58.120 +08:00 [INF]  "2021-02-25T11:26:58.1161723+08:00"GEThttpslocalhost:44303/api/Menus?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","No":1,"Name":"主页","Icon":"dashboard","NavigateUrl":"/dashboard","ComponentPath":"/views/dashboard/index","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.01,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[],"Roles":[]},{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNode":null,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","No":3,"Name":"系统管理","Icon":"el-icon-s-tools","NavigateUrl":"","ComponentPath":"/system/app","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.03,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","No":2,"Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","Description":"","IsRootNode":false,"IsLeafNode":true,"Level":1,"FullSortNo":3.02,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","No":3,"Name":"用户管理","Icon":"el-icon-s-custom","NavigateUrl":"user","ComponentPath":"/views/user/UserList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0303,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]}],"Roles":[]},{"Id":"be834d78-fee4-42ed-aabf-ac8d010bf957","No":2,"Name":"作品管理","Icon":"el-icon-edit-outline","NavigateUrl":"/novel/novel","ComponentPath":"","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.02,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"3fa71da0-5f81-4929-9049-ac8d01181ded","No":1,"Name":"作品大类","Icon":"el-icon-folder","NavigateUrl":"maincategory","ComponentPath":"/views/maincategory/MainCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0201,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"32b96dee-c250-46b9-8e22-ac8d0118513c","No":2,"Name":"作品小类","Icon":"el-icon-folder","NavigateUrl":"subcategory","ComponentPath":"/views/subcategory/SubCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0202,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","No":3,"Name":"作品管理","Icon":"el-icon-reading","NavigateUrl":"novel","ComponentPath":"/views/novel/NovelList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.020300000000000002,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"1798f080-f3c9-447e-a696-ac8d0118e73a","No":4,"Name":"作品分卷","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/segment","ComponentPath":"/views/segment/SegmentList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0204,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"ceaa2744-9682-44bc-99aa-ac8d01191639","No":5,"Name":"作品章节","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/chapter","ComponentPath":"/views/chapter/ChapterList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0205,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]}],"Roles":[]}]}null::11837
2021-02-25 11:26:58.121 +08:00 [DBG] Connection ID "18374686507052041619" disconnecting.
2021-02-25 11:26:58.123 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:26:58.125 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 200 4077 application/json;+charset=utf-8 2087.0847ms
2021-02-25 11:29:25.452 +08:00 [DBG] Hosting starting
2021-02-25 11:29:25.505 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 11:29:25.510 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 11:29:25.517 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 11:29:25.521 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 11:29:25.526 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 11:29:25.536 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 11:29:25.543 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:29:25.545 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 11:29:25.546 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 11:29:25.550 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 11:29:25.553 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 11:29:25.556 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 11:29:25.556 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 11:29:25.693 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 11:29:25.693 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 11:29:25.693 +08:00 [INF] Hosting environment: Development
2021-02-25 11:29:25.693 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 11:29:25.693 +08:00 [DBG] Hosting started
2021-02-25 11:29:25.709 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/index.html - -
2021-02-25 11:29:25.710 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 11:29:25.799 +08:00 [DBG] Connection ID "18086456122310394947" disconnecting.
2021-02-25 11:29:25.802 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/index.html - - - 200 - text/html;charset=utf-8 94.9639ms
2021-02-25 11:29:26.076 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - -
2021-02-25 11:29:26.085 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - -
2021-02-25 11:29:26.096 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-02-25 11:29:26.097 +08:00 [DBG] Connection ID "17870283323016741742" disconnecting.
2021-02-25 11:29:26.097 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/favicon-32x32.png - - - 200 628 image/png 11.9679ms
2021-02-25 11:29:26.262 +08:00 [DBG] Connection ID "18230571323271152668" disconnecting.
2021-02-25 11:29:26.262 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.2431ms
2021-02-25 11:29:35.563 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus/tree - -
2021-02-25 11:29:35.564 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 11:29:35.591 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Menus/tree'
2021-02-25 11:29:35.593 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetTree (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/tree' is valid for the request path '/api/Menus/tree'
2021-02-25 11:29:35.594 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/{id}' is valid for the request path '/api/Menus/tree'
2021-02-25 11:29:35.595 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetTree (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:29:35.785 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 11:29:35.787 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetTree (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:29:35.795 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 11:29:35.808 +08:00 [INF] Route matched with {action = "GetTree", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetTreeDTO]]] GetTree() on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 11:29:35.809 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 11:29:35.809 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 11:29:35.810 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 11:29:35.810 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 11:29:35.810 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 11:29:35.810 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:29:35.933 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 11:29:36.089 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 11:29:36.444 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 11:29:36.445 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 11:29:36.514 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:29:36.514 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:29:36.514 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:29:36.514 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 11:29:36.618 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 11:29:36.708 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()'
2021-02-25 11:29:36.812 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: MenuDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: MenuDTO.ComponentPath (string), 1], [Property: MenuDTO.Description (string), 2], [Property: MenuDTO.FullSortNo (double) Required, 3], [Property: MenuDTO.Icon (string), 4], [Property: MenuDTO.IsLeafNode (bool) Required, 5], [Property: MenuDTO.IsRootNode (bool) Required, 6], [Property: MenuDTO.Level (int) Required, 7], [Property: MenuDTO.Name (string), 8], [Property: MenuDTO.NavigateUrl (string), 9], [Property: MenuDTO.No (int) Required, 10], [Property: MenuDTO.ParentNodeId (Nullable<Guid>) FK Index, 11], }
        SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
        FROM S_Menu AS s), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 11:29:36.842 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 11:29:36.867 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (22ms).
2021-02-25 11:29:36.872 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:29:37.178 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:29:37.185 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 11:29:37.222 +08:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 11:29:37.266 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.309 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.320 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.321 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.321 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.321 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.321 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.322 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.322 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.322 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.322 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.323 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 11:29:37.327 +08:00 [DBG] A data reader was disposed.
2021-02-25 11:29:37.330 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:29:37.334 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 11:29:37.358 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 11:29:37.361 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 11:29:37.361 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 11:29:37.361 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 11:29:37.361 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 11:29:37.362 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 11:29:37.362 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetTreeDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 11:29:37.398 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetTree (UltraNuke.Barasingha.Permission.API) in 1584.49ms
2021-02-25 11:29:37.398 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetTree (UltraNuke.Barasingha.Permission.API)'
2021-02-25 11:29:37.402 +08:00 [INF]  "2021-02-25T11:29:37.3984740+08:00"GEThttpslocalhost:44303/api/Menus/tree[{"Id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","Name":"主页","Icon":"dashboard","NavigateUrl":"/dashboard","ComponentPath":"/views/dashboard/index","ChildNodes":[]},{"Id":"be834d78-fee4-42ed-aabf-ac8d010bf957","Name":"作品管理","Icon":"el-icon-edit-outline","NavigateUrl":"/novel/novel","ComponentPath":"","ChildNodes":[{"Id":"3fa71da0-5f81-4929-9049-ac8d01181ded","Name":"作品大类","Icon":"el-icon-folder","NavigateUrl":"maincategory","ComponentPath":"/views/maincategory/MainCategoryList","ChildNodes":[]},{"Id":"32b96dee-c250-46b9-8e22-ac8d0118513c","Name":"作品小类","Icon":"el-icon-folder","NavigateUrl":"subcategory","ComponentPath":"/views/subcategory/SubCategoryList","ChildNodes":[]},{"Id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","Name":"作品管理","Icon":"el-icon-reading","NavigateUrl":"novel","ComponentPath":"/views/novel/NovelList","ChildNodes":[]},{"Id":"1798f080-f3c9-447e-a696-ac8d0118e73a","Name":"作品分卷","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/segment","ComponentPath":"/views/segment/SegmentList","ChildNodes":[]},{"Id":"ceaa2744-9682-44bc-99aa-ac8d01191639","Name":"作品章节","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/chapter","ComponentPath":"/views/chapter/ChapterList","ChildNodes":[]}]},{"Id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","Name":"系统管理","Icon":"el-icon-s-tools","NavigateUrl":"","ComponentPath":"/system/app","ChildNodes":[{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","ChildNodes":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","ChildNodes":[]},{"Id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","Name":"用户管理","Icon":"el-icon-s-custom","NavigateUrl":"user","ComponentPath":"/views/user/UserList","ChildNodes":[]}]},{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","ChildNodes":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","ChildNodes":[]}]null::11611
2021-02-25 11:29:37.403 +08:00 [DBG] Connection ID "18086456122310394949" disconnecting.
2021-02-25 11:29:37.405 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 11:29:37.407 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus/tree - - - 200 2263 application/json;+charset=utf-8 1844.4029ms
2021-02-25 12:37:55.448 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus/select - -
2021-02-25 12:37:55.449 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 12:37:55.451 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Menus/select'
2021-02-25 12:37:55.451 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/select' is valid for the request path '/api/Menus/select'
2021-02-25 12:37:55.451 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/{id}' is valid for the request path '/api/Menus/select'
2021-02-25 12:37:55.451 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:37:55.452 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 12:37:55.452 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:37:55.455 +08:00 [INF] Route matched with {action = "GetSelect", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetSelectDTO]]] GetSelect() on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 12:37:55.455 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 12:37:55.455 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 12:37:55.455 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 12:37:55.455 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 12:37:55.456 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 12:37:55.456 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:37:55.456 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:37:55.483 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 12:37:55.484 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:37:55.484 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:37:55.485 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:37:55.485 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:37:55.485 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 12:37:55.487 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 12:37:55.487 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.487 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.488 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.489 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.489 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.489 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.489 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:37:55.489 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:37:55.489 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:37:55.490 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:37:55.498 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 12:37:55.498 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 12:37:55.499 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 12:37:55.499 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 12:37:55.499 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 12:37:55.499 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 12:37:55.499 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetSelectDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 12:37:55.500 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API) in 44.6892ms
2021-02-25 12:37:55.501 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:37:55.501 +08:00 [INF]  "2021-02-25T12:37:55.5011934+08:00"GEThttpslocalhost:44303/api/Menus/select[{"id":"891b4930-e858-4f62-96e8-13f9b82efd50","label":"根目录","children":[{"id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","label":"主页","children":[]},{"id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","label":"系统管理","children":[{"id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","label":"菜单管理","children":[]},{"id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","label":"角色管理","children":[]},{"id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","label":"用户管理","children":[]}]},{"id":"be834d78-fee4-42ed-aabf-ac8d010bf957","label":"作品管理","children":[{"id":"3fa71da0-5f81-4929-9049-ac8d01181ded","label":"作品大类","children":[]},{"id":"32b96dee-c250-46b9-8e22-ac8d0118513c","label":"作品小类","children":[]},{"id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","label":"作品管理","children":[]},{"id":"1798f080-f3c9-447e-a696-ac8d0118e73a","label":"作品分卷","children":[]},{"id":"ceaa2744-9682-44bc-99aa-ac8d01191639","label":"作品章节","children":[]}]}]}]null::148
2021-02-25 12:37:55.501 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 12:37:55.501 +08:00 [DBG] Connection ID "18230571323271152678" disconnecting.
2021-02-25 12:37:55.502 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus/select - - - 200 985 application/json;+charset=utf-8 54.1159ms
2021-02-25 12:54:31.256 +08:00 [DBG] Hosting starting
2021-02-25 12:54:31.313 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 12:54:31.318 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 12:54:31.325 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 12:54:31.329 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 12:54:31.334 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 12:54:31.342 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 12:54:31.350 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 12:54:31.352 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 12:54:31.353 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 12:54:31.356 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 12:54:31.359 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 12:54:31.362 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 12:54:31.363 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 12:54:31.499 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 12:54:31.500 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 12:54:31.500 +08:00 [INF] Hosting environment: Development
2021-02-25 12:54:31.500 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 12:54:31.500 +08:00 [DBG] Hosting started
2021-02-25 12:54:31.515 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus/select - -
2021-02-25 12:54:31.517 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 12:54:31.543 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 12:54:31.575 +08:00 [DBG] 2 candidate(s) found for the request path '/api/Menus/select'
2021-02-25 12:54:31.578 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/select' is valid for the request path '/api/Menus/select'
2021-02-25 12:54:31.578 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Get (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus/{id}' is valid for the request path '/api/Menus/select'
2021-02-25 12:54:31.579 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:31.768 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 12:54:31.771 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:31.777 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 12:54:31.794 +08:00 [INF] Route matched with {action = "GetSelect", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetSelectDTO]]] GetSelect() on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 12:54:31.796 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 12:54:31.796 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 12:54:31.796 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 12:54:31.797 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 12:54:31.797 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 12:54:31.798 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:54:31.917 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 12:54:32.078 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:54:32.435 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 12:54:32.435 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 12:54:32.506 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:54:32.506 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:54:32.506 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:54:32.507 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:54:32.612 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 12:54:32.702 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()'
2021-02-25 12:54:32.812 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: MenuDTO.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: MenuDTO.ComponentPath (string), 1], [Property: MenuDTO.Description (string), 2], [Property: MenuDTO.FullSortNo (double) Required, 3], [Property: MenuDTO.Icon (string), 4], [Property: MenuDTO.IsLeafNode (bool) Required, 5], [Property: MenuDTO.IsRootNode (bool) Required, 6], [Property: MenuDTO.Level (int) Required, 7], [Property: MenuDTO.Name (string), 8], [Property: MenuDTO.NavigateUrl (string), 9], [Property: MenuDTO.No (int) Required, 10], [Property: MenuDTO.ParentNodeId (Nullable<Guid>) FK Index, 11], }
        SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
        FROM S_Menu AS s), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 12:54:32.841 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:54:32.865 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2021-02-25 12:54:32.869 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:33.200 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:33.208 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 12:54:33.240 +08:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
FROM [S_Menu] AS [s]
2021-02-25 12:54:33.291 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.342 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.358 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.360 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.360 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.361 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.361 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.361 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.362 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.362 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.362 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.362 +08:00 [DBG] Context 'PermissionQueriesContext' started tracking 'MenuDTO' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2021-02-25 12:54:33.367 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:54:33.370 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:33.376 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:33.402 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 12:54:33.404 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 12:54:33.405 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 12:54:33.405 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 12:54:33.405 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 12:54:33.406 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 12:54:33.406 +08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuForGetSelectDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 12:54:33.501 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API) in 1699.3386ms
2021-02-25 12:54:33.502 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.GetSelect (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:33.507 +08:00 [INF]  "2021-02-25T12:54:33.5021952+08:00"GEThttpslocalhost:44303/api/Menus/select[{"id":"891b4930-e858-4f62-96e8-13f9b82efd50","label":"根目录","children":[{"id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","label":"主页","children":[]},{"id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","label":"系统管理","children":[{"id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","label":"菜单管理","children":[]},{"id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","label":"角色管理","children":[]},{"id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","label":"用户管理","children":[]}]},{"id":"be834d78-fee4-42ed-aabf-ac8d010bf957","label":"作品管理","children":[{"id":"3fa71da0-5f81-4929-9049-ac8d01181ded","label":"作品大类","children":[]},{"id":"32b96dee-c250-46b9-8e22-ac8d0118513c","label":"作品小类","children":[]},{"id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","label":"作品管理","children":[]},{"id":"1798f080-f3c9-447e-a696-ac8d0118e73a","label":"作品分卷","children":[]},{"id":"ceaa2744-9682-44bc-99aa-ac8d01191639","label":"作品章节","children":[]}]}]}]null::11730
2021-02-25 12:54:33.516 +08:00 [DBG] Connection ID "18230571323271152684" disconnecting.
2021-02-25 12:54:33.518 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 12:54:33.520 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus/select - - - 200 985 application/json;+charset=utf-8 2008.1475ms
2021-02-25 12:54:43.147 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 12:54:43.148 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 12:54:43.149 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 12:54:43.149 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 12:54:43.149 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:43.150 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 12:54:43.151 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:43.162 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 12:54:43.162 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 12:54:43.162 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 12:54:43.163 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 12:54:43.163 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 12:54:43.163 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 12:54:43.163 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:54:43.163 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:54:43.169 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:54:43.172 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 12:54:43.173 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:54:43.173 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:54:43.173 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:54:43.175 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:54:43.176 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:54:43.176 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 12:54:43.176 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:54:43.177 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:54:43.177 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:54:43.177 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:54:43.202 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 12:54:43.213 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 12:54:43.255 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 12:54:43.269 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:54:43.270 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:54:43.270 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.270 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.270 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:54:43.274 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:54:43.276 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:54:43.277 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.277 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.280 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 12:54:43.288 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 12:54:43.355 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.ParentNodeId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 12:54:43.359 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:54:43.359 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:54:43.362 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.362 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.365 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:54:43.383 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:54:43.392 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:54:43.392 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.392 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:54:43.393 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 12:54:43.393 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 12:54:43.393 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 12:54:43.393 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 12:54:43.393 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 12:54:43.393 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 12:54:43.393 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 12:54:43.407 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 244.005ms
2021-02-25 12:54:43.407 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:54:43.408 +08:00 [INF]  "2021-02-25T12:54:43.4078671+08:00"GEThttpslocalhost:44303/api/Menus?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","No":1,"Name":"主页","Icon":"dashboard","NavigateUrl":"/dashboard","ComponentPath":"/views/dashboard/index","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.01,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[],"Roles":[]},{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNode":null,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","No":3,"Name":"系统管理","Icon":"el-icon-s-tools","NavigateUrl":"","ComponentPath":"/system/app","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.03,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","No":2,"Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","Description":"","IsRootNode":false,"IsLeafNode":true,"Level":1,"FullSortNo":3.02,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","No":3,"Name":"用户管理","Icon":"el-icon-s-custom","NavigateUrl":"user","ComponentPath":"/views/user/UserList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0303,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]}],"Roles":[]},{"Id":"be834d78-fee4-42ed-aabf-ac8d010bf957","No":2,"Name":"作品管理","Icon":"el-icon-edit-outline","NavigateUrl":"/novel/novel","ComponentPath":"","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.02,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"3fa71da0-5f81-4929-9049-ac8d01181ded","No":1,"Name":"作品大类","Icon":"el-icon-folder","NavigateUrl":"maincategory","ComponentPath":"/views/maincategory/MainCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0201,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"32b96dee-c250-46b9-8e22-ac8d0118513c","No":2,"Name":"作品小类","Icon":"el-icon-folder","NavigateUrl":"subcategory","ComponentPath":"/views/subcategory/SubCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0202,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","No":3,"Name":"作品管理","Icon":"el-icon-reading","NavigateUrl":"novel","ComponentPath":"/views/novel/NovelList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.020300000000000002,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"1798f080-f3c9-447e-a696-ac8d0118e73a","No":4,"Name":"作品分卷","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/segment","ComponentPath":"/views/segment/SegmentList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0204,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]},{"Id":"ceaa2744-9682-44bc-99aa-ac8d01191639","No":5,"Name":"作品章节","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/chapter","ComponentPath":"/views/chapter/ChapterList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0205,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":[],"Roles":[]}],"Roles":[]}]}null::1256
2021-02-25 12:54:43.409 +08:00 [DBG] Connection ID "18374686507052041653" disconnecting.
2021-02-25 12:54:43.409 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 12:54:43.409 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 200 4077 application/json;+charset=utf-8 262.0297ms
2021-02-25 12:55:23.651 +08:00 [DBG] Hosting starting
2021-02-25 12:55:23.892 +08:00 [INF] User profile is available. Using 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-25 12:55:23.897 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-a84a35c2-4303-4247-bb3a-791cc2be753a.xml'.
2021-02-25 12:55:23.936 +08:00 [DBG] Reading data from file 'C:\Users\zcqd\AppData\Local\ASP.NET\DataProtection-Keys\key-b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2.xml'.
2021-02-25 12:55:23.941 +08:00 [DBG] Found key {a84a35c2-4303-4247-bb3a-791cc2be753a}.
2021-02-25 12:55:23.945 +08:00 [DBG] Found key {b6fa6a98-50e6-46ae-8784-e7ab0f07b4f2}.
2021-02-25 12:55:23.953 +08:00 [DBG] Considering key {a84a35c2-4303-4247-bb3a-791cc2be753a} with expiration date 2021-03-07 08:08:18Z as default key.
2021-02-25 12:55:23.961 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 12:55:23.963 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-25 12:55:23.964 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-25 12:55:23.968 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-25 12:55:23.971 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-25 12:55:23.973 +08:00 [DBG] Using key {a84a35c2-4303-4247-bb3a-791cc2be753a} as the default key.
2021-02-25 12:55:23.974 +08:00 [DBG] Key ring with default key {a84a35c2-4303-4247-bb3a-791cc2be753a} was loaded during application startup.
2021-02-25 12:55:24.231 +08:00 [DBG] Loaded hosting startup assembly UltraNuke.Barasingha.Permission.API
2021-02-25 12:55:24.232 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-25 12:55:24.232 +08:00 [INF] Hosting environment: Development
2021-02-25 12:55:24.232 +08:00 [INF] Content root path: F:\self-product\Barasingha-WebApi\src\Services\Permission\Permission.API
2021-02-25 12:55:24.232 +08:00 [DBG] Hosting started
2021-02-25 12:55:24.258 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 12:55:24.260 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-25 12:55:24.307 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 12:55:24.333 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 12:55:24.335 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 12:55:24.336 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:24.557 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 12:55:24.560 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:24.566 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2021-02-25 12:55:24.589 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 12:55:24.589 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 12:55:24.590 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 12:55:24.590 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 12:55:24.590 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 12:55:24.590 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 12:55:24.591 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:55:24.784 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2021-02-25 12:55:24.933 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:55:24.956 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:55:24.958 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 12:55:24.958 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:24.959 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:24.959 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:55:24.960 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:24.961 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:55:24.961 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 12:55:24.961 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:24.961 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:24.962 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:55:24.962 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:25.341 +08:00 [DBG] The index {'MenusId'} was not created on entity type 'MenuDTORoleDTO (Dictionary<string, object>)' as the properties are already covered by the index {'MenusId', 'RolesId'}.
2021-02-25 12:55:25.341 +08:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleDTOUserDTO (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2021-02-25 12:55:25.408 +08:00 [DBG] The property 'MenusId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:55:25.408 +08:00 [DBG] The property 'RolesId.MenuDTORoleDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:55:25.408 +08:00 [DBG] The property 'RolesId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:55:25.408 +08:00 [DBG] The property 'UsersId.RoleDTOUserDTO (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2021-02-25 12:55:25.505 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 12:55:25.619 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .Count()'
2021-02-25 12:55:25.719 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2021-02-25 12:55:25.754 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:55:25.788 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (31ms).
2021-02-25 12:55:25.795 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.237 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.243 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:55:26.276 +08:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:55:26.291 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:55:26.294 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.299 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.304 +08:00 [DBG] Compiling query expression: 
'DbSet<MenuDTO>()
    .Include(b => b.ChildNodes)
    .AsNoTracking()
    .Where(w => w.IsLeafNode == False && w.IsRootNode == False)
    .OrderBy(o => o.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2021-02-25 12:55:26.317 +08:00 [DBG] Including navigation: 'MenuDTO.ChildNodes'.
2021-02-25 12:55:26.395 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MenuDTO>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT t.Id, t.ComponentPath, t.Description, t.FullSortNo, t.Icon, t.IsLeafNode, t.IsRootNode, t.Level, t.Name, t.NavigateUrl, t.No, t.ParentNodeId, s0.Id, s0.ComponentPath, s0.Description, s0.FullSortNo, s0.Icon, s0.IsLeafNode, s0.IsRootNode, s0.Level, s0.Name, s0.NavigateUrl, s0.No, s0.ParentNodeId
        FROM Projection Mapping:
        (
            SELECT s.Id, s.ComponentPath, s.Description, s.FullSortNo, s.Icon, s.IsLeafNode, s.IsRootNode, s.Level, s.Name, s.NavigateUrl, s.No, s.ParentNodeId
            FROM S_Menu AS s
            WHERE (s.IsLeafNode == CAST(0 AS bit)) && (s.IsRootNode == CAST(0 AS bit))
            ORDER BY s.Id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN S_Menu AS s0 ON t.Id == s0.ParentNodeId
        ORDER BY t.Id ASC, s0.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MenuDTO>, 
    UltraNuke.Barasingha.Permission.API.Infrastructure.PermissionQueriesContext, 
    False, 
    False
)'
2021-02-25 12:55:26.403 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:55:26.403 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:55:26.407 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.407 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.410 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:55:26.427 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:55:26.441 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:55:26.441 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.442 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:26.443 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 12:55:26.445 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 12:55:26.445 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 12:55:26.445 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 12:55:26.446 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 12:55:26.446 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 12:55:26.446 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 12:55:26.551 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 1957.4471ms
2021-02-25 12:55:26.551 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:26.556 +08:00 [INF]  "2021-02-25T12:55:26.5518689+08:00"GEThttpslocalhost:44303/api/Menus?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","No":1,"Name":"主页","Icon":"dashboard","NavigateUrl":"/dashboard","ComponentPath":"/views/dashboard/index","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.01,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[],"Roles":[]},{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNode":null,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","No":3,"Name":"系统管理","Icon":"el-icon-s-tools","NavigateUrl":"","ComponentPath":"/system/app","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.03,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","No":2,"Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","Description":"","IsRootNode":false,"IsLeafNode":true,"Level":1,"FullSortNo":3.02,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]},{"Id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","No":3,"Name":"用户管理","Icon":"el-icon-s-custom","NavigateUrl":"user","ComponentPath":"/views/user/UserList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0303,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]}],"Roles":[]},{"Id":"be834d78-fee4-42ed-aabf-ac8d010bf957","No":2,"Name":"作品管理","Icon":"el-icon-edit-outline","NavigateUrl":"/novel/novel","ComponentPath":"","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.02,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"3fa71da0-5f81-4929-9049-ac8d01181ded","No":1,"Name":"作品大类","Icon":"el-icon-folder","NavigateUrl":"maincategory","ComponentPath":"/views/maincategory/MainCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0201,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"32b96dee-c250-46b9-8e22-ac8d0118513c","No":2,"Name":"作品小类","Icon":"el-icon-folder","NavigateUrl":"subcategory","ComponentPath":"/views/subcategory/SubCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0202,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","No":3,"Name":"作品管理","Icon":"el-icon-reading","NavigateUrl":"novel","ComponentPath":"/views/novel/NovelList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.020300000000000002,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"1798f080-f3c9-447e-a696-ac8d0118e73a","No":4,"Name":"作品分卷","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/segment","ComponentPath":"/views/segment/SegmentList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0204,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"ceaa2744-9682-44bc-99aa-ac8d01191639","No":5,"Name":"作品章节","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/chapter","ComponentPath":"/views/chapter/ChapterList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0205,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]}],"Roles":[]}]}null::11991
2021-02-25 12:55:26.564 +08:00 [DBG] Connection ID "18230571323271152686" disconnecting.
2021-02-25 12:55:26.568 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 12:55:26.571 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 200 4093 application/json;+charset=utf-8 2313.9583ms
2021-02-25 12:55:44.704 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - -
2021-02-25 12:55:44.705 +08:00 [DBG] The request path  does not match the path filter
2021-02-25 12:55:44.706 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Menus'
2021-02-25 12:55:44.706 +08:00 [DBG] Endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)' with route pattern 'api/Menus' is valid for the request path '/api/Menus'
2021-02-25 12:55:44.707 +08:00 [DBG] Request matched endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:44.707 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-02-25 12:55:44.707 +08:00 [INF] Executing endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:44.708 +08:00 [INF] Route matched with {action = "Query", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO]]] Query(Int32, Int32) on controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API).
2021-02-25 12:55:44.708 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2021-02-25 12:55:44.709 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2021-02-25 12:55:44.709 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2021-02-25 12:55:44.709 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2021-02-25 12:55:44.709 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2021-02-25 12:55:44.710 +08:00 [DBG] Executing controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:55:44.710 +08:00 [DBG] Executed controller factory for controller UltraNuke.Barasingha.Permission.API.Controllers.MenusController (UltraNuke.Barasingha.Permission.API)
2021-02-25 12:55:44.711 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:55:44.711 +08:00 [DBG] Attempting to bind parameter 'pageIndex' of type 'System.Int32' using the name 'pageIndex' in request data ...
2021-02-25 12:55:44.711 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:44.712 +08:00 [DBG] Done attempting to bind parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:44.712 +08:00 [DBG] Attempting to validate the bound parameter 'pageIndex' of type 'System.Int32' ...
2021-02-25 12:55:44.712 +08:00 [DBG] Done attempting to validate the bound parameter 'pageIndex' of type 'System.Int32'.
2021-02-25 12:55:44.712 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:55:44.712 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2021-02-25 12:55:44.712 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:44.713 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:44.713 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2021-02-25 12:55:44.713 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2021-02-25 12:55:44.734 +08:00 [INF] Entity Framework Core 5.0.1 initialized 'PermissionQueriesContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-25 12:55:44.737 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:55:44.737 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:55:44.737 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.738 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.739 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:55:44.740 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [S_Menu] AS [s]
WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
2021-02-25 12:55:44.740 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:55:44.740 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.740 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.741 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2021-02-25 12:55:44.741 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2021-02-25 12:55:44.741 +08:00 [DBG] Opening connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.741 +08:00 [DBG] Opened connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.741 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:55:44.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ComponentPath], [t].[Description], [t].[FullSortNo], [t].[Icon], [t].[IsLeafNode], [t].[IsRootNode], [t].[Level], [t].[Name], [t].[NavigateUrl], [t].[No], [t].[ParentNodeId], [s0].[Id], [s0].[ComponentPath], [s0].[Description], [s0].[FullSortNo], [s0].[Icon], [s0].[IsLeafNode], [s0].[IsRootNode], [s0].[Level], [s0].[Name], [s0].[NavigateUrl], [s0].[No], [s0].[ParentNodeId]
FROM (
    SELECT [s].[Id], [s].[ComponentPath], [s].[Description], [s].[FullSortNo], [s].[Icon], [s].[IsLeafNode], [s].[IsRootNode], [s].[Level], [s].[Name], [s].[NavigateUrl], [s].[No], [s].[ParentNodeId]
    FROM [S_Menu] AS [s]
    WHERE ([s].[IsLeafNode] <> CAST(1 AS bit)) AND ([s].[IsRootNode] <> CAST(1 AS bit))
    ORDER BY [s].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [S_Menu] AS [s0] ON [t].[Id] = [s0].[ParentNodeId]
ORDER BY [t].[Id], [s0].[Id]
2021-02-25 12:55:44.743 +08:00 [DBG] A data reader was disposed.
2021-02-25 12:55:44.743 +08:00 [DBG] Closing connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.743 +08:00 [DBG] Closed connection to database 'Barasingha.Permission' on server '.\SQLEXPRESS'.
2021-02-25 12:55:44.743 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2021-02-25 12:55:44.743 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2021-02-25 12:55:44.744 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2021-02-25 12:55:44.744 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2021-02-25 12:55:44.744 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2021-02-25 12:55:44.744 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2021-02-25 12:55:44.744 +08:00 [INF] Executing ObjectResult, writing value of type 'UltraNuke.CommonMormon.Utils.WebApi.PaginatedItems`1[[UltraNuke.Barasingha.Permission.API.Application.DTO.MenuDTO, UltraNuke.Barasingha.Permission.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-25 12:55:44.745 +08:00 [INF] Executed action UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API) in 35.2256ms
2021-02-25 12:55:44.745 +08:00 [INF] Executed endpoint 'UltraNuke.Barasingha.Permission.API.Controllers.MenusController.Query (UltraNuke.Barasingha.Permission.API)'
2021-02-25 12:55:44.745 +08:00 [INF]  "2021-02-25T12:55:44.7456640+08:00"GEThttpslocalhost:44303/api/Menus?pageIndex=1&pageSize=100{"Total":4,"Items":[{"Id":"654728ca-5e6b-4a80-a3da-ac8d00e73b83","No":1,"Name":"主页","Icon":"dashboard","NavigateUrl":"/dashboard","ComponentPath":"/views/dashboard/index","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.01,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[],"Roles":[]},{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNode":null,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":[],"Roles":[]},{"Id":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","No":3,"Name":"系统管理","Icon":"el-icon-s-tools","NavigateUrl":"","ComponentPath":"/system/app","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.03,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"9c94c7b7-a85c-492a-9072-ac8d00fe4448","No":1,"Name":"菜单管理","Icon":"el-icon-menu","NavigateUrl":"menu","ComponentPath":"/views/menu/MenuList","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":3.01,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]},{"Id":"2a799e5c-eb10-4be8-927b-ac8d00ff0544","No":2,"Name":"角色管理","Icon":"el-icon-s-check","NavigateUrl":"role","ComponentPath":"/views/role/RoleList","Description":"","IsRootNode":false,"IsLeafNode":true,"Level":1,"FullSortNo":3.02,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]},{"Id":"92cbf30e-2bf1-414e-881f-ac8d0117acb4","No":3,"Name":"用户管理","Icon":"el-icon-s-custom","NavigateUrl":"user","ComponentPath":"/views/user/UserList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0303,"ParentNodeId":"c13629eb-e5b4-4cd1-a5a1-ac8d0102933e","ChildNodes":null,"Roles":[]}],"Roles":[]},{"Id":"be834d78-fee4-42ed-aabf-ac8d010bf957","No":2,"Name":"作品管理","Icon":"el-icon-edit-outline","NavigateUrl":"/novel/novel","ComponentPath":"","Description":"","IsRootNode":false,"IsLeafNode":false,"Level":1,"FullSortNo":0.02,"ParentNode":null,"ParentNodeId":"891b4930-e858-4f62-96e8-13f9b82efd50","ChildNodes":[{"Id":"3fa71da0-5f81-4929-9049-ac8d01181ded","No":1,"Name":"作品大类","Icon":"el-icon-folder","NavigateUrl":"maincategory","ComponentPath":"/views/maincategory/MainCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0201,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"32b96dee-c250-46b9-8e22-ac8d0118513c","No":2,"Name":"作品小类","Icon":"el-icon-folder","NavigateUrl":"subcategory","ComponentPath":"/views/subcategory/SubCategoryList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0202,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"4a1cb1ed-7ae8-4cec-8603-ac8d0118bee5","No":3,"Name":"作品管理","Icon":"el-icon-reading","NavigateUrl":"novel","ComponentPath":"/views/novel/NovelList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.020300000000000002,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"1798f080-f3c9-447e-a696-ac8d0118e73a","No":4,"Name":"作品分卷","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/segment","ComponentPath":"/views/segment/SegmentList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0204,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]},{"Id":"ceaa2744-9682-44bc-99aa-ac8d01191639","No":5,"Name":"作品章节","Icon":"el-icon-reading","NavigateUrl":"/novel/:novelId/chapter","ComponentPath":"/views/chapter/ChapterList","Description":null,"IsRootNode":false,"IsLeafNode":true,"Level":2,"FullSortNo":0.0205,"ParentNodeId":"be834d78-fee4-42ed-aabf-ac8d010bf957","ChildNodes":null,"Roles":[]}],"Roles":[]}]}null::137
2021-02-25 12:55:44.767 +08:00 [DBG] Connection ID "17870283344491577543" disconnecting.
2021-02-25 12:55:44.768 +08:00 [DBG] 'PermissionQueriesContext' disposed.
2021-02-25 12:55:44.768 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44303/api/Menus?pageIndex=1&pageSize=100 - - - 200 4093 application/json;+charset=utf-8 63.6475ms
